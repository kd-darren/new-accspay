(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1829d5aa"],{"07c1":function(e,t,r){},"0f9e":function(e,t,r){"use strict";r("07c1")},"107c":function(e,t,r){var o=r("d039"),n=r("da84"),i=n.RegExp;e.exports=o((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},1276:function(e,t,r){"use strict";var o=r("2ba4"),n=r("c65b"),i=r("e330"),s=r("d784"),a=r("44e7"),c=r("825a"),l=r("1d80"),u=r("4840"),d=r("8aa5"),m=r("50c4"),h=r("577e"),g=r("dc4a"),p=r("4dae"),f=r("14c3"),v=r("9263"),y=r("9f7f"),b=r("d039"),w=y.UNSUPPORTED_Y,_=4294967295,x=Math.min,C=[].push,O=i(/./.exec),k=i(C),F=i("".slice),R=!b((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));s("split",(function(e,t,r){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var i=h(l(this)),s=void 0===r?_:r>>>0;if(0===s)return[];if(void 0===e)return[i];if(!a(e))return n(t,i,e,s);var c,u,d,m=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,y=new RegExp(e.source,g+"g");while(c=n(v,y,i)){if(u=y.lastIndex,u>f&&(k(m,F(i,f,c.index)),c.length>1&&c.index<i.length&&o(C,m,p(c,1)),d=c[0].length,f=u,m.length>=s))break;y.lastIndex===c.index&&y.lastIndex++}return f===i.length?!d&&O(y,"")||k(m,""):k(m,F(i,f)),m.length>s?p(m,0,s):m}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:n(t,this,e,r)}:t,[function(t,r){var o=l(this),s=void 0==t?void 0:g(t,e);return s?n(s,t,o,r):n(i,h(o),t,r)},function(e,o){var n=c(this),s=h(e),a=r(i,n,s,o,i!==t);if(a.done)return a.value;var l=u(n,RegExp),g=n.unicode,p=(n.ignoreCase?"i":"")+(n.multiline?"m":"")+(n.unicode?"u":"")+(w?"g":"y"),v=new l(w?"^(?:"+n.source+")":n,p),y=void 0===o?_:o>>>0;if(0===y)return[];if(0===s.length)return null===f(v,s)?[s]:[];var b=0,C=0,O=[];while(C<s.length){v.lastIndex=w?0:C;var R,I=f(v,w?F(s,C):s);if(null===I||(R=x(m(v.lastIndex+(w?C:0)),s.length))===b)C=d(s,C,g);else{if(k(O,F(s,b,C)),O.length===y)return O;for(var S=1;S<=I.length-1;S++)if(k(O,I[S]),O.length===y)return O;C=b=R}}return k(O,F(s,b)),O}]}),!R,w)},"14c3":function(e,t,r){var o=r("da84"),n=r("c65b"),i=r("825a"),s=r("1626"),a=r("c6b6"),c=r("9263"),l=o.TypeError;e.exports=function(e,t){var r=e.exec;if(s(r)){var o=n(r,e,t);return null!==o&&i(o),o}if("RegExp"===a(e))return n(c,e,t);throw l("RegExp#exec called on incompatible receiver")}},2423:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"goods_detail"},[r("div",{staticClass:"goods_header"},[r("header-navigator")],1),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.detailLoading,expression:"detailLoading"}],staticClass:"goods_container"},[r("div",{staticClass:"member_text"},[e._v("【"+e._s(e.good_detail.categoryName)+"】"+e._s(e.good_detail.translateName))]),r("el-divider"),r("el-container",[r("el-aside",{attrs:{width:"3.78rem"}},[r("div",[r("el-image",{staticStyle:{width:"3.78rem",height:"3.78rem"},attrs:{src:e.currentImg,fit:"fill"}}),e.imgs.length>=2?r("div",{staticClass:"mini_imgs"},[r("el-carousel",{attrs:{interval:4e3,type:"card",height:"1.6rem"},on:{change:e.getCurrentImg}},e._l(e.imgs,(function(e,t){return r("el-carousel-item",{key:t},[r("el-image",{attrs:{src:e.imgurl}})],1)})),1)],1):e._e()],1)]),r("el-main",[r("div",{staticClass:"detail_price"},[e._v(" "+e._s(e.good_detail.currency)+e._s(e.good_detail.price)),r("span",[e._v(" (剩余 "+e._s(e.good_detail.stock)+" 件)")])]),r("div",{staticClass:"detail_intro"},e._l(e.good_detail.introduce,(function(t,o){return r("div",{key:o},[r("span",{staticClass:"dot"}),r("span",{domProps:{innerHTML:e._s(t.text)}}),t.tab?r("el-link",{attrs:{type:"primary",underline:!1}},[e._v("( "+e._s(t.tab)+" )")]):e._e()],1)})),0),r("div",[r("div",{staticClass:"goods_btn",on:{click:function(t){return e.buyBtn(e.good_detail)}}},[e._v("購買")])])])],1),r("div",{staticClass:"other_goods",style:{height:e.isOtherHeight?"3.7rem":"auto"}},[r("div",{staticClass:"other_title"},[r("el-divider",{attrs:{direction:"vertical"}}),e._v("相關商品")],1),0==e.otherGoods.length?r("div",{staticStyle:{"font-size":"0.16rem",color:"#cbcbcb",padding:"0.2rem"}},[e._v("暫無相關商品")]):r("div",{staticClass:"other_content",style:{"justify-content":e.otherGoods.length>5?"space-between":null}},e._l(e.otherGoods,(function(t,o){return r("div",{key:o,staticStyle:{padding:"0 0.15rem"},style:{"margin-right":e.otherGoods.length>5?null:"0.5rem"}},[r("div",{staticStyle:{cursor:"pointer"},on:{click:function(r){return e.toDetail(t.id)}}},[r("img",{staticClass:"other_img",attrs:{src:t.img}}),r("div",{staticClass:"other_goodstitle"},[e._v(e._s(t.translateName))]),r("div",[e._v(" $ "+e._s(t.price))]),r("div",{staticClass:"other_number"},[e._v("剩余 "+e._s(t.stock)+" 件")])]),r("div",{staticClass:"other_btn",on:{click:function(r){return e.buyBtn(t)}}},[e._v("立即購買")])])})),0)])],1),r("footer-container"),r("buy-dialog",{attrs:{show:e.showBuy,currentGoods:e.currentGoods},on:{"update:show":function(t){return e.showBuy=t},"update:buySuccess":function(t){return e.buySuccess=t}}})],1)},n=[],i=(r("ac1f"),r("1276"),r("d81d"),r("1647")),s=r("062e"),a=r("f327"),c=r("c40e"),l={components:{headerNavigator:i["a"],footerContainer:s["a"],buyDialog:a["a"]},data:function(){return{showBuy:!1,currentGoods:{translateName:null},goodsForm:{number:1,price:null,checked:!1},memberText:"5,000 Instagram Followers 全球粉+FREE Auto Likes",currentImg:"",imgs:[],good_detail:{id:"",categoryId:"",currencyCode:"",currency:"$",price:0,stock:0,translateName:"Facebook賬號 適合投廣告",introduce:[]},otherGoods:[],buySuccess:!1,detailLoading:!1,isOtherHeight:!1}},created:function(){this.getGoodsDetails()},watch:{buySuccess:function(){this.buySuccess&&this.getGoodsDetails()},$route:function(){this.getGoodsDetails()}},methods:{getGoodsDetails:function(){var e=this;this.imgs=[],this.detailLoading=!0,Object(c["b"])(this.$route.query.id).then((function(t){e.good_detail=t.data,e.good_detail.introduce=[],e.good_detail.currency="$",e.imgs.push({imgurl:"//www.accspay.com/v1"+t.data.coverUrl}),e.currentImg="//www.accspay.com/v1"+t.data.coverUrl;var r=/<ul>|<\/ul>|<li>|<\/li>|<p>|<\/p>|<br>/gi;if(null!=t.data.translateRemark){var o=t.data.translateRemark.split(r);o.map((function(t){""!=t&&e.good_detail.introduce.push({text:t})}))}e.getOtherGoods()}))},getOtherGoods:function(){var e=this;this.otherGoods=[],Object(c["d"])(this.good_detail.categoryId).then((function(t){t.rows.map((function(t){t.id!=e.good_detail.id&&e.otherGoods.length<=8&&e.otherGoods.push({id:t.id,img:"//www.accspay.com/v1"+t.coverUrl,translateName:t.translateName,currencyCode:t.currencyCode,price:t.price,stock:t.stock})})),t.rows.length>1&&(e.isOtherHeight=!0),e.detailLoading=!1})).catch((function(){e.detailLoading=!1}))},getCurrentImg:function(e){this.currentImg=this.imgs[e].imgurl},buyBtn:function(e){this.buySuccess=!1,this.currentGoods=e,this.showBuy=!0},toDetail:function(e){this.$router.push({path:"goods_detail",query:{id:e}})}}},u=l,d=(r("0f9e"),r("2877")),m=Object(d["a"])(u,o,n,!1,null,null,null);t["default"]=m.exports},3705:function(e,t,r){},"8aa5":function(e,t,r){"use strict";var o=r("6547").charAt;e.exports=function(e,t,r){return t+(r?o(e,t).length:1)}},9263:function(e,t,r){"use strict";var o=r("c65b"),n=r("e330"),i=r("577e"),s=r("ad6d"),a=r("9f7f"),c=r("5692"),l=r("7c73"),u=r("69f3").get,d=r("fce3"),m=r("107c"),h=c("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,p=g,f=n("".charAt),v=n("".indexOf),y=n("".replace),b=n("".slice),w=function(){var e=/a/,t=/b*/g;return o(g,e,"a"),o(g,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),_=a.BROKEN_CARET,x=void 0!==/()??/.exec("")[1],C=w||x||_||d||m;C&&(p=function(e){var t,r,n,a,c,d,m,C=this,O=u(C),k=i(e),F=O.raw;if(F)return F.lastIndex=C.lastIndex,t=o(p,F,k),C.lastIndex=F.lastIndex,t;var R=O.groups,I=_&&C.sticky,S=o(s,C),G=C.source,P=0,D=k;if(I&&(S=y(S,"y",""),-1===v(S,"g")&&(S+="g"),D=b(k,C.lastIndex),C.lastIndex>0&&(!C.multiline||C.multiline&&"\n"!==f(k,C.lastIndex-1))&&(G="(?: "+G+")",D=" "+D,P++),r=new RegExp("^(?:"+G+")",S)),x&&(r=new RegExp("^"+G+"$(?!\\s)",S)),w&&(n=C.lastIndex),a=o(g,I?r:C,D),I?a?(a.input=b(a.input,P),a[0]=b(a[0],P),a.index=C.lastIndex,C.lastIndex+=a[0].length):C.lastIndex=0:w&&a&&(C.lastIndex=C.global?a.index+a[0].length:n),x&&a&&a.length>1&&o(h,a[0],r,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(a[c]=void 0)})),a&&R)for(a.groups=d=l(null),c=0;c<R.length;c++)m=R[c],d[m[0]]=a[m[1]];return a}),e.exports=p},"9f7f":function(e,t,r){var o=r("d039"),n=r("da84"),i=n.RegExp,s=o((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),a=s||o((function(){return!i("a","y").sticky})),c=s||o((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:c,MISSED_STICKY:a,UNSUPPORTED_Y:s}},a54e:function(e,t,r){"use strict";r("3705")},ac1f:function(e,t,r){"use strict";var o=r("23e7"),n=r("9263");o({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},ad6d:function(e,t,r){"use strict";var o=r("825a");e.exports=function(){var e=o(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},c40e:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return i})),r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return a})),r.d(t,"g",(function(){return c})),r.d(t,"h",(function(){return l})),r.d(t,"e",(function(){return u})),r.d(t,"f",(function(){return d}));var o=r("b775");function n(){return Object(o["a"])({url:"/api/mall/productCategory/list",method:"get"})}function i(e){return Object(o["a"])({url:"/api/mall/product/list?categoryId="+e,method:"get"})}function s(){return Object(o["a"])({url:"/api/mall/product/list",method:"get"})}function a(e){return Object(o["a"])({url:"/api/mall/product/".concat(e),methods:"get"})}function c(e){return Object(o["a"])({url:"/api/mall/productOrder/actions/submit",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/api/mall/productOrder/actions/pay",method:"post",data:e})}function u(e){return Object(o["a"])({url:"/api/mall/productOrder/".concat(e,"/actions/onlinePayInfo"),methods:"get"})}function d(e){return Object(o["a"])({url:"/api/mall/productOrder/".concat(e,"/actions/onlinePayStatus"),methods:"get"})}},d784:function(e,t,r){"use strict";r("ac1f");var o=r("e330"),n=r("6eeb"),i=r("9263"),s=r("d039"),a=r("b622"),c=r("9112"),l=a("species"),u=RegExp.prototype;e.exports=function(e,t,r,d){var m=a(e),h=!s((function(){var t={};return t[m]=function(){return 7},7!=""[e](t)})),g=h&&!s((function(){var t=!1,r=/a/;return"split"===e&&(r={},r.constructor={},r.constructor[l]=function(){return r},r.flags="",r[m]=/./[m]),r.exec=function(){return t=!0,null},r[m](""),!t}));if(!h||!g||r){var p=o(/./[m]),f=t(m,""[e],(function(e,t,r,n,s){var a=o(e),c=t.exec;return c===i||c===u.exec?h&&!s?{done:!0,value:p(t,r,n)}:{done:!0,value:a(r,t,n)}:{done:!1}}));n(String.prototype,e,f[0]),n(u,m,f[1])}d&&c(u[m],"sham",!0)}},f327:function(e,t,r){"use strict";var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"buy_now_dialog"},[r("el-dialog",{attrs:{visible:e.showBuy,title:"購買","custom-class":"buy_now",width:"450px","before-close":e.closePay},on:{"update:visible":function(t){e.showBuy=t}}},[e.showOnlinePay?r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.infoLoading,expression:"infoLoading"}],staticClass:"online_pay"},[r("div",{staticClass:"online_pay_title"},[e._v("支付寶掃壹掃支付 "),r("span",[e._v(e._s(e.onlineOrder.paymentAmount)+" 人民幣")])]),r("div",{staticClass:"pay_code_img"},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.onlineOrder.codeUrl&&0!=e.countDown,expression:"!onlineOrder.codeUrl && countDown != 0"}],staticClass:"reset_code"},[r("el-link",{on:{click:e.resetGetCodeTwo}},[e._v("獲取二維碼失敗，請點擊刷新")])],1),r("div",{directives:[{name:"show",rawName:"v-show",value:0==e.countDown,expression:"countDown == 0"}],staticClass:"reset_code"},[r("el-link",{on:{click:e.resetGetCode}},[e._v("二維碼已失效，請點擊刷新")])],1),r("vue-qr",{attrs:{text:e.onlineOrder.codeUrl,size:260}})],1),r("div",{staticStyle:{"text-align":"center","font-weight":"600","margin-bottom":"10px"}},[e._v("支付倒計時："),r("span",{staticStyle:{color:"#f66f45"}},[e._v(e._s(e.countDown)+" s")])]),r("div",[e._v("註：訂單已提交，請於"+e._s(e.cancelOrderTime)+"分鐘內支付訂單,否則支付將失效，需重新刷新獲取。")])]):r("div",[r("div",{staticClass:"goods_content"},[e._v(e._s(e.currentGoods.translateName))]),r("el-divider"),r("el-form",{ref:"goodsForm",attrs:{model:e.goodsForm,"label-width":"0.8rem"}},[r("el-form-item",{attrs:{label:"數量"}},[r("el-input-number",{attrs:{"controls-position":"right",min:1,size:"small",precision:0},on:{change:e.getGoodsPrice},model:{value:e.goodsForm.number,callback:function(t){e.$set(e.goodsForm,"number",t)},expression:"goodsForm.number"}})],1),r("el-form-item",{attrs:{label:"價錢"}},[r("div",{staticClass:"buy_price"},[e._v("$ "+e._s(e.goodsForm.price))])]),r("el-form-item",{staticClass:"goods_checked",attrs:{prop:"checked"}},[r("div",[r("el-checkbox",{model:{value:e.goodsForm.checked,callback:function(t){e.$set(e.goodsForm,"checked",t)},expression:"goodsForm.checked"}},[e._v("我同意公開報價和使用條款")])],1)]),r("el-form-item",[r("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[r("el-button",{attrs:{type:"primary",disabled:!e.goodsForm.checked},on:{click:e.submitGoods}},[e._v("提交訂單")])],1)])],1)],1)]),r("el-dialog",{attrs:{visible:e.showRLBuy,"custom-class":"login_buy_now",width:"600px","before-close":e.closePay},on:{"update:visible":function(t){e.showRLBuy=t}}},[r("div",{staticClass:"buy_login_head"},[r("el-steps",{attrs:{active:e.activeStep,"finish-status":"success"}},[r("el-step",{attrs:{title:"用戶登錄/註冊"}}),r("el-step",{attrs:{title:"支付"}})],1)],1),0==e.activeStep?r("div",{staticClass:"rl_box"},[r("div",{staticClass:"current_title"},[e.isRegister?r("span",[e._v("用戶註冊")]):r("span",[e._v("用戶登錄")])]),r("el-form",{ref:"rlForm",staticClass:"rl-form",attrs:{model:e.rlForm,rules:e.rlRules}},[e.isRegister?e._e():r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"請輸入郵箱","prefix-icon":"el-icon-user"},model:{value:e.rlForm.username,callback:function(t){e.$set(e.rlForm,"username",t)},expression:"rlForm.username"}})],1),e.isRegister?r("el-form-item",{attrs:{prop:"username2"}},[r("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"請輸入郵箱","prefix-icon":"el-icon-user"},model:{value:e.rlForm.username2,callback:function(t){e.$set(e.rlForm,"username2",t)},expression:"rlForm.username2"}})],1):e._e(),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"請輸入密碼","prefix-icon":"el-icon-lock"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleRL.apply(null,arguments)}},model:{value:e.rlForm.password,callback:function(t){e.$set(e.rlForm,"password",t)},expression:"rlForm.password"}})],1),e.isRegister?r("el-form-item",{attrs:{prop:"confirmPassword"}},[r("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"請再次輸入密碼","prefix-icon":"el-icon-lock"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleRL.apply(null,arguments)}},model:{value:e.rlForm.confirmPassword,callback:function(t){e.$set(e.rlForm,"confirmPassword",t)},expression:"rlForm.confirmPassword"}})],1):e._e(),e.captchaOnOff?r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{staticStyle:{width:"63%"},attrs:{"auto-complete":"off",placeholder:"驗證碼"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleRL.apply(null,arguments)}},model:{value:e.rlForm.code,callback:function(t){e.$set(e.rlForm,"code",t)},expression:"rlForm.code"}}),r("div",{staticClass:"rl-code"},[r("img",{staticClass:"rl-code-img",attrs:{src:e.codeUrl},on:{click:e.getCode}})])],1):e._e(),r("el-checkbox",{staticStyle:{margin:"0 0 0.25rem 0"},model:{value:e.rlForm.rememberMe,callback:function(t){e.$set(e.rlForm,"rememberMe",t)},expression:"rlForm.rememberMe"}},[e._v("記住密碼")]),r("el-form-item",{staticStyle:{width:"100%"}},[r("el-button",{staticStyle:{width:"100%"},attrs:{loading:e.loading,size:"medium",type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleRL.apply(null,arguments)}}},[r("span",[e._v("下 壹 步")])]),r("div",{staticStyle:{float:"right"}},[e.isRegister?e._e():r("el-link",{on:{click:e.isRLClick}},[e._v("立即註冊")]),e.isRegister?r("el-link",{on:{click:e.isRLClick}},[e._v("使用已有賬戶登錄")]):e._e()],1)],1)],1)],1):r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.infoLoading,expression:"infoLoading"}],staticClass:"payment_box"},[r("div",{staticClass:"online_pay"},[r("div",{staticClass:"online_pay_title"},[e._v("支付寶掃壹掃支付 "),r("span",[e._v(e._s(e.onlineOrder.paymentAmount)+" 人民幣")])]),r("div",{staticClass:"pay_code_img"},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.onlineOrder.codeUrl&&0!=e.countDown,expression:"!onlineOrder.codeUrl && countDown != 0"}],staticClass:"reset_code"},[r("el-link",{on:{click:e.resetGetCodeTwo}},[e._v("獲取二維碼失敗，請點擊刷新")])],1),r("div",{directives:[{name:"show",rawName:"v-show",value:0==e.countDown,expression:"countDown == 0"}],staticClass:"reset_code"},[r("el-link",{on:{click:e.resetGetCode}},[e._v("二維碼已失效，請點擊刷新")])],1),r("vue-qr",{attrs:{text:e.onlineOrder.codeUrl,size:260}})],1),r("div",{staticStyle:{"text-align":"center","font-weight":"600","margin-bottom":"10px"}},[e._v("支付倒計時："),r("span",{staticStyle:{color:"#f66f45"}},[e._v(e._s(e.countDown)+" s")])]),r("div",[e._v("註：訂單已提交，請於"+e._s(e.cancelOrderTime)+"分鐘內支付訂單,否則支付訂單將失效，需重新刷新獲取。")])])])])],1)},n=[],i=(r("b680"),r("658f5")),s=r.n(i),a=r("7ded"),c=r("852e"),l=r.n(c),u=r("21f2"),d=r("c40e"),m=r("0fea"),h={name:"buy_dialog",components:{VueQr:s.a},data:function(){var e=this,t=function(t,r,o){e.rlForm.password!==r?o(new Error("兩次輸入的密碼不壹致")):o()};return{goodsForm:{number:null,price:null,checked:!1},showBuy:!1,showRLBuy:!1,activeStep:0,codeUrl:"",rlForm:{username:"",username2:"",password:"",confirmPassword:"",code:"",uuid:"",rememberMe:!1},isRegister:!1,loginForm:null,rlRules:{username:[{required:!0,trigger:"blur",message:"請輸入您的郵箱"}],username2:[{required:!0,trigger:"blur",message:"請輸入您的郵箱"},{type:"email",message:"請輸入正確的郵箱",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"請輸入您的密碼"},{min:5,max:20,message:"用戶密碼長度必須介於 5 和 20 之間",trigger:"blur"}],confirmPassword:[{required:!0,trigger:"blur",message:"請再次輸入您的密碼"},{required:!0,validator:t,trigger:"blur"}],code:[{required:!0,trigger:"change",message:"請輸入驗證碼"}]},loading:!1,captchaOnOff:!0,showOnlinePay:!1,orderContent:{productId:null,quantity:null,orderId:null},onlineOrder:{codeUrl:null,paymentAmount:null},timer:null,buySuccess:!1,infoLoading:!1,cancelOrderTime:"",countDown:null,countDownTimer:null}},props:{show:{type:Boolean,default:!1},currentGoods:{type:Object,default:null}},watch:{show:function(e){this.buySuccess=!1,this.showOnlinePay=!1,this.activeStep=0,this.goodsForm.number=null,this.goodsForm.checked=!1,this.goodsForm.price=this.currentGoods.price.toFixed(2),this.showBuy=e},showBuy:function(e){this.$emit("update:show",e)},buySuccess:function(){this.buySuccess&&this.$emit("update:buySuccess",this.buySuccess)}},methods:{getGoodsPrice:function(e){this.goodsForm.price=(this.currentGoods.price*e).toFixed(2)},submitGoods:function(){var e=this;this.currentGoods.stock<this.goodsForm.number?this.$message({showClose:!0,type:"error",message:"商品庫存不足",customClass:"messageBuy"}):(this.orderContent.productId=this.currentGoods.id,this.orderContent.quantity=this.goodsForm.number,this.$store.state.user.token?this.postGoods():(this.showBuy=!1,setTimeout((function(){e.activeStep=0,e.rlForm={username:"",username2:"",password:"",confirmPassword:"",code:"",uuid:"",rememberMe:!1},e.getCode(),e.getCookie(),e.showRLBuy=!0}),300)))},postGoods:function(){var e=this;Object(d["g"])(this.orderContent).then((function(t){e.orderContent.orderId=t.id,e.postWalletPay()}))},resetGetCode:function(){var e=this;Object(d["g"])(this.orderContent).then((function(t){clearTimeout(e.timer),e.orderContent.orderId=t.id,e.getCancelTime()}))},resetGetCodeTwo:function(){this.infoLoading=!0,this.getOnlinePay()},postWalletPay:function(){var e=this,t={id:this.orderContent.orderId,paymentMethod:0};Object(d["h"])(t).then((function(){e.$message({showClose:!0,type:"success",message:"已成功提交並支付訂單，可以到我的訂單裏查看信息",customClass:"messageBuy"}),e.showBuy=!1,e.showRLBuy=!1,e.buySuccess=!0})).catch((function(){e.infoLoading=!0,setTimeout(e.getCancelTime(),1e3)}))},getCancelTime:function(){var e=this;Object(m["e"])({code:this.orderContent.orderId}).then((function(t){var r=new Date(t.rows[0].createTime),o=new Date(t.rows[0].planCancelTime);e.cancelOrderTime=parseInt((o-r)/1e3/60),e.countDown=60*e.cancelOrderTime,e.countDownTimer=setInterval((function(){e.countDown=e.countDown-1,e.countDown<=0&&clearInterval(e.countDownTimer)}),1e3),e.getOnlinePay()}))},getOnlinePay:function(){var e=this;Object(d["e"])(this.orderContent.orderId).then((function(t){e.onlineOrder.codeUrl=t.data.url,e.onlineOrder.paymentAmount=t.data.paymentAmount,e.showOnlinePay=!0,e.infoLoading=!1,e.activeStep=1,e.onlineOrder.codeUrl&&(e.timer=setTimeout((function(){e.getOnlinePayStatus()}),2e3))}))},getOnlinePayStatus:function(){var e=this;Object(d["f"])(this.orderContent.orderId).then((function(t){1==t?(clearInterval(e.countDownTimer),e.$message({showClose:!0,type:"success",message:"已成功支付訂單，可以到我的訂單裏查看信息",customClass:"messageBuy"}),e.showBuy=!1,e.showOnlinePay=!1,e.showRLBuy=!1,e.buySuccess=!0):e.timer=setTimeout((function(){e.getOnlinePayStatus()}),2e3)}))},closePay:function(){clearTimeout(this.timer),clearInterval(this.countDownTimer),this.showBuy=!1,this.showOnlinePay=!1,this.showRLBuy=!1},isRLClick:function(){this.isRegister=!this.isRegister,this.$refs.rlForm.resetFields(),this.rlForm.password="",this.rlForm.confirmPassword="",this.rlForm.username="",this.rlForm.username2="",this.rlForm.rememberMe=!1,this.isRegister||this.getCookie(),this.getCode()},getCookie:function(){var e=l.a.get("username"),t=l.a.get("password"),r=l.a.get("rememberMe");this.rlForm.username=void 0===e?this.rlForm.username:e,this.rlForm.password=void 0===t?this.rlForm.password:Object(u["a"])(t),this.rlForm.rememberMe=void 0!==r&&Boolean(r)},getCode:function(){var e=this;this.rlForm.code="",Object(a["a"])().then((function(t){e.captchaOnOff=void 0===t.captchaOnOff||t.captchaOnOff,e.captchaOnOff&&(e.codeUrl="data:image/gif;base64,"+t.img,e.rlForm.uuid=t.uuid)}))},handleRL:function(){var e=this;this.isRegister&&(this.rlForm.username=this.rlForm.username2),this.$refs.rlForm.validate((function(t){t&&(e.loading=!0,e.rlForm.rememberMe?(l.a.set("username",e.rlForm.username,{expires:30}),l.a.set("password",Object(u["b"])(e.rlForm.password),{expires:30}),l.a.set("rememberMe",e.rlForm.rememberMe,{expires:30})):(l.a.remove("username"),l.a.remove("password"),l.a.remove("rememberMe")),e.isRegister?e.$store.dispatch("Register",e.rlForm).then((function(){e.$alert("<font color='green'>恭喜妳，您的賬號 "+e.rlForm.username+" 註冊成功！</font>","系統提示",{dangerouslyUseHTMLString:!0}).then((function(){e.$store.dispatch("GetInfo"),e.loading=!1,e.postGoods()})).catch((function(){}))})).catch((function(){e.loading=!1,e.captchaOnOff&&e.getCode()})):e.$store.dispatch("Login",e.rlForm).then((function(){e.$store.dispatch("GetInfo"),e.loading=!1,e.postGoods()})).catch((function(){e.loading=!1,e.captchaOnOff&&e.getCode()})))}))}}},g=h,p=(r("a54e"),r("2877")),f=Object(p["a"])(g,o,n,!1,null,null,null);t["a"]=f.exports},fce3:function(e,t,r){var o=r("d039"),n=r("da84"),i=n.RegExp;e.exports=o((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))}}]);